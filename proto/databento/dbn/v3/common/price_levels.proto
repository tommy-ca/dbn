syntax = "proto3";

package databento.dbn.v3.common;

option go_package = "github.com/databento/dbn/gen/go/databento/dbn/v3/common";
option java_multiple_files = true;
option java_package = "com.databento.dbn.v3.common";

// BidAskPair represents a single price level.
// Binary layout: 32 bytes, 8-byte aligned
// All prices are fixed-point with scale 1e-9 (9 decimal places)
message BidAskPair {
  // Bid price (i64 in binary, fixed-width, signed)
  // Fixed-point: divide by 1,000,000,000 to get decimal price
  sfixed64 bid_px = 1;

  // Ask price (i64 in binary, fixed-width, signed)
  // Fixed-point: divide by 1,000,000,000 to get decimal price
  sfixed64 ask_px = 2;

  // Bid size/quantity (u32 in binary, fixed-width)
  fixed32 bid_sz = 3;

  // Ask size/quantity (u32 in binary, fixed-width)
  fixed32 ask_sz = 4;

  // Bid order count (u32 in binary, fixed-width)
  fixed32 bid_ct = 5;

  // Ask order count (u32 in binary, fixed-width)
  fixed32 ask_ct = 6;
}

// ConsolidatedBidAskPair represents a price level from multiple venues.
// Binary layout: 40 bytes, 8-byte aligned
message ConsolidatedBidAskPair {
  // Bid price (i64 in binary, fixed-width, signed)
  // Fixed-point: divide by 1,000,000,000 to get decimal price
  sfixed64 bid_px = 1;

  // Ask price (i64 in binary, fixed-width, signed)
  // Fixed-point: divide by 1,000,000,000 to get decimal price
  sfixed64 ask_px = 2;

  // Bid size/quantity (u32 in binary, fixed-width)
  fixed32 bid_sz = 3;

  // Ask size/quantity (u32 in binary, fixed-width)
  fixed32 ask_sz = 4;

  // Best bid publisher ID (u16 in binary, packed as u32)
  uint32 bid_pb = 5;

  // Best ask publisher ID (u16 in binary, packed as u32)
  uint32 ask_pb = 6;
}
