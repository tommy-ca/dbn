syntax = "proto3";

package databento.dbn.v3;

// NOTE: This file is automatically generated from the DBN specification
// and the Rust implementation. Do not modify manually.

// --- Enums ---

// The record type.
enum RType {
  // The first value must be zero in proto3.
  RTYPE_UNSPECIFIED = 0; // Default or unspecified record type
  MBP_0 = 1; // Market-by-price depth 0 (used for Trades schema) (was 0x00)
  MBP_1 = 2; // Market-by-price depth 1 (used for Mbp1 and Tbbo schemas) (was 0x01)
  MBP_10 = 3; // Market-by-price depth 10 (used for Mbp10 schema) (was 0x0A)
  OHLCV_1S = 4; // OHLCV 1-second (was 0x20)
  OHLCV_1M = 5; // OHLCV 1-minute (was 0x21)
  OHLCV_1H = 6; // OHLCV 1-hour (was 0x22)
  OHLCV_1D = 7; // OHLCV 1-day UTC (was 0x23)
  OHLCV_EOD = 8; // OHLCV end-of-day (was 0x24)
  STATUS = 9; // Exchange status (was 0x12)
  INSTRUMENT_DEF = 10; // Instrument definition (was 0x13)
  IMBALANCE = 11; // Order imbalance (was 0x14)
  ERROR = 12; // Error from gateway (was 0x15)
  SYMBOL_MAPPING = 13; // Symbol mapping (was 0x16)
  SYSTEM = 14; // System message/heartbeat (was 0x17)
  STATISTICS = 15; // Statistics (was 0x18)
  MBO = 16; // Market-by-order (was 0xA0)
  CMBP_1 = 17; // Consolidated MBP depth 1 (was 0xB1)
  CBBO_1S = 18; // Consolidated BBO 1-second (was 0xC0)
  CBBO_1M = 19; // Consolidated BBO 1-minute (was 0xC1)
  TCBBO = 20; // Trade with CBBO (was 0xC2)
  BBO_1S = 21; // BBO 1-second (was 0xC3)
  BBO_1M = 22; // BBO 1-minute (was 0xC4)
  // Reserved crypto extensions
  FUNDING_RATE = 23; // was 0xD0
  LIQUIDATION = 24; // was 0xD1
  MARK_PRICE = 25; // was 0xD2
  INDEX_PRICE = 26; // was 0xD3
  DEX_SWAP = 27; // was 0xD4
  DEX_POOL_STATE = 28; // was 0xD5
  ORACLE_PRICE = 29; // was 0xD6
  CROSS_RATE = 30; // was 0xD8
  BASIS = 31; // was 0xD9
  STABLECOIN_PEG = 32; // was 0xDA
  GAS_PRICE = 33; // was 0xDB
  BLOCK_INFO = 34; // was 0xDC
  SMART_CONTRACT_EVENT = 35; // was 0xDD
  INSURANCE_FUND = 36; // was 0xDE
  CLAWBACK = 37; // was 0xDF
  DELISTING = 38; // was 0xE0
  TOKEN_MIGRATION = 39; // was 0xE1
}

// The side of the market.
enum Side {
  // The first value must be zero in proto3.
  SIDE_UNSPECIFIED = 0; // Default or unspecified side
  BID = 0x42; // 'B' - Buy order or aggressor
  ASK = 0x41; // 'A' - Sell order or aggressor
  SIDE_NONE = 0x4E; // 'N' - No side specified
}

// An order event or order book operation.
enum Action {
  // The first value must be zero in proto3.
  ACTION_UNSPECIFIED = 0; // Default or unspecified action
  ADD = 0x41; // 'A' - A new order was added to the book
  CANCEL = 0x43; // 'C' - An existing order was fully or partially cancelled
  FILL = 0x46; // 'F' - An existing order was filled
  MODIFY = 0x4D; // 'M' - An existing order was modified
  CLEAR = 0x52; // 'R' - Reset the book; clear all orders for an instrument
  TRADE = 0x54; // 'T' - An aggressing order traded
  ACTION_NONE = 0x4E; // 'N' - No action
}

// The class of instrument.
enum InstrumentClass {
  // The first value must be zero in proto3.
  INSTRUMENT_CLASS_UNSPECIFIED = 0; // Default or unspecified instrument class
  BOND = 1; // 'B' - A bond (was 0x42)
  CALL = 2; // 'C' - A call option (was 0x43)
  FUTURE = 3; // 'F' - A future (was 0x46)
  STOCK = 4; // 'K' - A stock (was 0x4B)
  MIXED_SPREAD = 5; // 'M' - A spread composed of multiple instrument classes (was 0x4D)
  PUT = 6; // 'P' - A put option (was 0x50)
  FUTURE_SPREAD = 7; // 'S' - A spread composed of futures (was 0x53)
  OPTION_SPREAD = 8; // 'T' - A spread composed of options (was 0x54)
  FX_SPOT = 9; // 'X' - A foreign exchange spot (was 0x58)
  COMMODITY_SPOT = 10; // 'Y' - A commodity being traded for immediate delivery (was 0x59)
}

// The type of matching algorithm used for the instrument at the exchange.
enum MatchAlgorithm {
  // The first value must be zero in proto3.
  MATCH_ALGORITHM_UNSPECIFIED = 0; // Default or unspecified matching algorithm
  MATCH_ALGORITHM_UNDEFINED = 1; // ' ' - No matching algorithm was specified (was 0x20)
  FIFO = 2; // 'F' - First-in-first-out matching (was 0x46)
  CONFIGURABLE = 3; // 'K' - A configurable match algorithm (was 0x4B)
  PRO_RATA = 4; // 'C' - Trade quantity is allocated based on pro-rata percentage (was 0x43)
  FIFO_LMM = 5; // 'T' - Like FIFO but with LMM allocations prior to FIFO (was 0x54)
  THRESHOLD_PRO_RATA = 6; // 'O' - Like ProRata but includes configurable allocation to first order (was 0x4F)
  FIFO_TOP_LMM = 7; // 'S' - Like FifoLmm but includes configurable allocation to first order (was 0x53)
  THRESHOLD_PRO_RATA_LMM = 8; // 'Q' - Like ThresholdProRata but includes special priority to LMMs (was 0x51)
  EURODOLLAR_FUTURES = 9; // 'Y' - Special variant for Eurodollar futures on CME (was 0x59)
  TIME_PRO_RATA = 10; // 'P' - Trade quantity shared between all orders at best price, highest time priority receive more (was 0x50)
  INSTITUTIONAL_PRIORITIZATION = 11; // 'V' - Two-pass FIFO algorithm for institutional groups (was 0x56)
}

// Whether the instrument is user-defined.
enum UserDefinedInstrument {
  // The first value must be zero in proto3.
  USER_DEFINED_INSTRUMENT_UNSPECIFIED = 0; // Default or unspecified user-defined instrument status
  USER_DEFINED_INSTRUMENT_NO = 1; // 'N' - The instrument is not user-defined (was 0x4E)
  USER_DEFINED_INSTRUMENT_YES = 2; // 'Y' - The instrument is user-defined (was 0x59)
}

// The type of InstrumentDefMsg update.
enum SecurityUpdateAction {
  // The first value must be zero in proto3.
  SECURITY_UPDATE_ACTION_UNSPECIFIED = 0; // Default or unspecified security update action
  SECURITY_UPDATE_ACTION_ADD = 1; // 'A' - A new instrument definition (was 0x41)
  SECURITY_UPDATE_ACTION_MODIFY = 2; // 'M' - A modified instrument definition (was 0x4D)
  SECURITY_UPDATE_ACTION_DELETE = 3; // 'D' - Removal of an instrument definition (was 0x44)
  SECURITY_UPDATE_ACTION_INVALID = 4; // '~' - Still present in legacy files (was 0x7E)
}

// A symbology type.
enum SType {
  // The first value must be zero in proto3.
  STYPE_UNSPECIFIED = 0; // Default or unspecified symbology type
  STYPE_INSTRUMENT_ID = 1; // Symbology using a unique numeric ID (was 0)
  STYPE_RAW_SYMBOL = 2; // Symbology using the original symbols provided by the publisher (was 1)
  STYPE_SMART = 3; // Deprecated: Was split into continuous and parent (was 2)
  STYPE_CONTINUOUS = 4; // Databento-specific symbology for continuous contracts (was 3)
  STYPE_PARENT = 5; // Databento-specific symbology for parent symbols (e.g., ES.FUT) (was 4)
  STYPE_NASDAQ_SYMBOL = 6; // Symbology for US equities using NASDAQ Integrated suffix conventions (was 5)
  STYPE_CMS_SYMBOL = 7; // Symbology for US equities using CMS suffix conventions (was 6)
  STYPE_ISIN = 8; // Symbology using International Security Identification Numbers (ISIN) (was 7)
  STYPE_US_CODE = 9; // Symbology using US domestic CUSIP codes (was 8)
  STYPE_BBG_COMP_ID = 10; // Symbology using Bloomberg composite global IDs (was 9)
  STYPE_BBG_COMP_TICKER = 11; // Symbology using Bloomberg composite tickers (was 10)
  STYPE_FIGI = 12; // Symbology using Bloomberg FIGI exchange level IDs (was 11)
  STYPE_FIGI_TICKER = 13; // Symbology using Bloomberg FIGI exchange level tickers (was 12)
}

// A data record schema.
enum Schema {
  // The first value must be zero in proto3.
  SCHEMA_UNSPECIFIED = 0; // Default or unspecified schema
  SCHEMA_MBO = 1; // Market by order (was 0)
  SCHEMA_MBP_1 = 2; // Market by price with a book depth of 1 (was 1)
  SCHEMA_MBP_10 = 3; // Market by price with a book depth of 10 (was 2)
  SCHEMA_TBBO = 4; // All trade events with the BBO immediately before the effect of the trade (was 3)
  SCHEMA_TRADES = 5; // All trade events (was 4)
  SCHEMA_OHLCV_1S = 6; // OHLCV at a one-second interval (was 5)
  SCHEMA_OHLCV_1M = 7; // OHLCV at a one-minute interval (was 6)
  SCHEMA_OHLCV_1H = 8; // OHLCV at an hourly interval (was 7)
  SCHEMA_OHLCV_1D = 9; // OHLCV at a daily interval based on the UTC date (was 8)
  SCHEMA_DEFINITION = 10; // Instrument definitions (was 9)
  SCHEMA_STATISTICS = 11; // Additional data disseminated by publishers (was 10)
  SCHEMA_STATUS = 12; // Trading status events (was 11)
  SCHEMA_IMBALANCE = 13; // Auction imbalance events (was 12)
  SCHEMA_OHLCV_EOD = 14; // OHLCV at a daily cadence based on the end of the trading session (was 13)
  SCHEMA_CMBP_1 = 15; // Consolidated best bid and offer (was 14)
  SCHEMA_CBBO_1S = 16; // Consolidated BBO subsampled at one-second intervals, in addition to trades (was 15)
  SCHEMA_CBBO_1M = 17; // Consolidated BBO subsampled at one-minute intervals, in addition to trades (was 16)
  SCHEMA_TCBBO = 18; // All trade events with the consolidated BBO immediately before the effect of the trade (was 17)
  SCHEMA_BBO_1S = 19; // Best bid and offer subsampled at one-second intervals, in addition to trades (was 18)
  SCHEMA_BBO_1M = 20; // Best bid and offer subsampled at one-minute intervals, in addition to trades (was 19)
}

// A data encoding format.
enum Encoding {
  // The first value must be zero in proto3.
  ENCODING_UNSPECIFIED = 0; // Default or unspecified encoding
  DBN = 1; // Databento Binary Encoding (was 0)
  CSV = 2; // Comma-separated values (was 1)
  JSON = 3; // JavaScript object notation (was 2)
}

// A compression format or none if uncompressed.
enum Compression {
  // The first value must be zero in proto3.
  COMPRESSION_UNSPECIFIED = 0; // Default or unspecified compression
  COMPRESSION_NONE = 1; // Uncompressed (was 0)
  ZSTD = 2; // Zstandard compressed (was 1)
}

// The type of statistic.
enum StatType {
  // The first value must be zero in proto3.
  STAT_TYPE_UNSPECIFIED = 0; // Default or unspecified statistic type
  OPENING_PRICE = 1; // Price of the first trade of an instrument
  INDICATIVE_OPENING_PRICE = 2; // Probable price of the first trade during pre-open
  SETTLEMENT_PRICE = 3; // Settlement price of an instrument
  TRADING_SESSION_LOW_PRICE = 4; // Lowest trade price during the trading session
  TRADING_SESSION_HIGH_PRICE = 5; // Highest trade price during the trading session
  CLEARED_VOLUME = 6; // Number of contracts cleared for an instrument
  LOWEST_OFFER = 7; // Lowest offer price during the trading session
  HIGHEST_BID = 8; // Highest bid price during the trading session
  OPEN_INTEREST = 9; // Current number of outstanding contracts of an instrument
  FIXING_PRICE = 10; // Volume-weighted average price (VWAP) for a fixing period
  CLOSE_PRICE = 11; // Last trade price during a trading session
  NET_CHANGE = 12; // Change in price from previous close to most recent session
  VWAP = 13; // Volume-weighted average price (VWAP) during the trading session
  VOLATILITY = 14; // Implied volatility associated with the settlement price
  DELTA = 15; // Option delta associated with the settlement price
  UNCROSSING_PRICE = 16; // Auction uncrossing price
}

// The type of StatMsg update.
enum StatUpdateAction {
  // The first value must be zero in proto3.
  STAT_UPDATE_ACTION_UNSPECIFIED = 0; // Default or unspecified stat update action
  STAT_UPDATE_ACTION_NEW = 1; // A new statistic
  STAT_UPDATE_ACTION_DELETE = 2; // A removal of a statistic
}

// The primary enum for the type of StatusMsg update.
enum StatusAction {
  // The first value must be zero in proto3.
  STATUS_ACTION_UNSPECIFIED = 0; // Default or unspecified status action
  PRE_OPEN = 1; // The instrument is in a pre-open period
  PRE_CROSS = 2; // The instrument is in a pre-cross period
  QUOTING = 3; // The instrument is quoting but not trading
  CROSS = 4; // The instrument is in a cross/auction
  ROTATION = 5; // The instrument is being opened through a trading rotation
  NEW_PRICE_INDICATION = 6; // A new price indication is available for the instrument
  TRADING = 7; // The instrument is trading
  HALT = 8; // Trading in the instrument has been halted
  PAUSE = 9; // Trading in the instrument has been paused
  SUSPEND = 10; // Trading in the instrument has been suspended
  PRE_CLOSE = 11; // The instrument is in a pre-close period
  CLOSE = 12; // Trading in the instrument has closed
  POST_CLOSE = 13; // The instrument is in a post-close period
  SSR_CHANGE = 14; // A change in short-selling restrictions
  NOT_AVAILABLE_FOR_TRADING = 15; // The instrument is not available for trading
  STATUS_ACTION_NONE = 16; // No change (was 0)
}

// The secondary enum for a StatusMsg update, explains the cause of a halt or other change in action.
enum StatusReason {
  // The first value must be zero in proto3.
  STATUS_REASON_UNSPECIFIED = 0; // Default or unspecified status reason
  SCHEDULED = 1; // The change in status occurred as scheduled
  SURVEILLANCE_INTERVENTION = 2; // The instrument stopped due to a market surveillance intervention
  MARKET_EVENT = 3; // The status changed due to activity in the market
  INSTRUMENT_ACTIVATION = 4; // The derivative instrument began trading
  INSTRUMENT_EXPIRATION = 5; // The derivative instrument expired
  RECOVERY_IN_PROCESS = 6; // Recovery in progress
  REGULATORY = 10; // The status change was caused by a regulatory action
  ADMINISTRATIVE = 11; // The status change was caused by an administrative action
  NON_COMPLIANCE = 12; // The status change was caused by the issuer not being compliance with regulatory requirements
  FILINGS_NOT_CURRENT = 13; // Trading halted because the issuer's filings are not current
  SEC_TRADING_SUSPENSION = 14; // Trading halted due to an SEC trading suspension
  NEW_ISSUE = 15; // The status changed because a new issue is available
  ISSUE_AVAILABLE = 16; // The status changed because an issue is available
  ISSUES_REVIEWED = 17; // The status changed because the issue(s) were reviewed
  FILING_REQS_SATISFIED = 18; // The status changed because the filing requirements were satisfied
  NEWS_PENDING = 30; // Relevant news is pending
  NEWS_RELEASED = 31; // Relevant news was released
  NEWS_AND_RESUMPTION_TIMES = 32; // The news has been fully disseminated and times are available for the resumption in quoting and trading
  NEWS_NOT_FORTHCOMING = 33; // The relevant news was not forthcoming
  ORDER_IMBALANCE = 40; // Halted for order imbalance
  LULD_PAUSE = 50; // The instrument hit limit up or limit down
  OPERATIONAL = 60; // An operational issue occurred with the venue
  ADDITIONAL_INFORMATION_REQUESTED = 70; // The status changed until the exchange receives additional information
  MERGER_EFFECTIVE = 80; // Trading halted due to merger becoming effective
  ETF = 90; // Trading is halted in an ETF due to conditions with the component securities
  CORPORATE_ACTION = 100; // Trading is halted for a corporate action
  NEW_SECURITY_OFFERING = 110; // Trading is halted because the instrument is a new offering
  MARKET_WIDE_HALT_LEVEL1 = 120; // Halted due to the market-wide circuit breaker level 1
  MARKET_WIDE_HALT_LEVEL2 = 121; // Halted due to the market-wide circuit breaker level 2
  MARKET_WIDE_HALT_LEVEL3 = 122; // Halted due to the market-wide circuit breaker level 3
  MARKET_WIDE_HALT_CARRYOVER = 123; // Halted due to the carryover of a market-wide circuit breaker from the previous trading day
  MARKET_WIDE_HALT_RESUMPTION = 124; // Resumption due to the end of a market-wide circuit breaker halt
  QUOTATION_NOT_AVAILABLE = 130; // Halted because quotation is not available
  STATUS_REASON_NONE = 131; // No reason is given (was 0)
}

// Further information about a status update.
enum TradingEvent {
  // The first value must be zero in proto3.
  TRADING_EVENT_UNSPECIFIED = 0; // Default or unspecified trading event
  NO_CANCEL = 1; // Order entry and modification are not allowed
  CHANGE_TRADING_SESSION = 2; // A change of trading session occurred. Daily statistics are reset
  IMPLIED_MATCHING_ON = 3; // Implied matching is available
  IMPLIED_MATCHING_OFF = 4; // Implied matching is not available
  TRADING_EVENT_NONE = 5; // No additional information given (was 0)
}

// An enum for representing unknown, true, or false values.
enum TriState {
  // The first value must be zero in proto3.
  TRI_STATE_UNSPECIFIED = 0; // Default or unspecified TriState
  TRI_STATE_NOT_AVAILABLE = 1; // '~' - The value is not applicable or not known (was 0x7E)
  TRI_STATE_NO = 2; // 'N' - False (was 0x4E)
  TRI_STATE_YES = 3; // 'Y' - True (was 0x59)
}

// An error code from the live subscription gateway.
enum ErrorCode {
  // The first value must be zero in proto3.
  ERROR_CODE_UNSPECIFIED = 0; // Default or unspecified error code
  AUTH_FAILED = 1; // The authentication step failed
  API_KEY_DEACTIVATED = 2; // The user account or API key were deactivated
  CONNECTION_LIMIT_EXCEEDED = 3; // The user has exceeded their open connection limit
  SYMBOL_RESOLUTION_FAILED = 4; // One or more symbols failed to resolve
  INVALID_SUBSCRIPTION = 5; // There was an issue with a subscription request
  INTERNAL_ERROR = 6; // An error occurred in the gateway
  ERROR_CODE_UNSET_VALUE = 255; // No error code was specified or upgraded from v1
}

// A SystemMsg code indicating the type of message from the live subscription gateway.
enum SystemCode {
  // The first value must be zero in proto3.
  SYSTEM_CODE_UNSPECIFIED = 0; // Default or unspecified system code
  HEARTBEAT = 1; // A message sent in the absence of other records to indicate the connection remains open (was 0)
  SUBSCRIPTION_ACK = 2; // An acknowledgement of a subscription request (was 1)
  SLOW_READER_WARNING = 3; // The gateway has detected this session is falling behind real-time (was 2)
  REPLAY_COMPLETED = 4; // Indicates a replay subscription has caught up with real-time data (was 3)
  END_OF_INTERVAL = 5; // Signals that all records for interval-based schemas have been published for the given timestamp (was 4)
  SYSTEM_CODE_UNSET_VALUE = 255; // No system code was specified or upgraded from v1
}

// How to handle decoding DBN data from other versions.
enum VersionUpgradePolicy {
  // The first value must be zero in proto3.
  VERSION_UPGRADE_POLICY_UNSPECIFIED = 0; // Default or unspecified version upgrade policy
  AS_IS = 1; // Decode data from all supported versions as-is (was 0)
  UPGRADE_TO_V2 = 2; // Decode and convert data from DBN versions prior to v2 to v2 (was 1)
  UPGRADE_TO_V3 = 3; // Decode and convert data from DBN versions prior to v3 to v3 (was 2)
}

// --- Messages ---

// Common data for all Databento records.
message RecordHeader {
  // The record type.
  RType rtype = 1;
  // The publisher ID assigned by Databento.
  uint32 publisher_id = 2;
  // The numeric instrument ID.
  uint32 instrument_id = 3;
  // The matching-engine-received timestamp (UNIX nanoseconds).
  uint64 ts_event = 4;
}

// A price level.
message BidAskPair {
  // The bid price (fixed-point with 1e-9 scale).
  sint64 bid_px = 1;
  // The ask price (fixed-point with 1e-9 scale).
  sint64 ask_px = 2;
  // The bid size.
  uint32 bid_sz = 3;
  // The ask size.
  uint32 ask_sz = 4;
  // The bid order count.
  uint32 bid_ct = 5;
  // The ask order count.
  uint32 ask_ct = 6;
}

// A price level consolidated from multiple venues.
message ConsolidatedBidAskPair {
  // The bid price (fixed-point with 1e-9 scale).
  sint64 bid_px = 1;
  // The ask price (fixed-point with 1e-9 scale).
  sint64 ask_px = 2;
  // The bid size.
  uint32 bid_sz = 3;
  // The ask size.
  uint32 ask_sz = 4;
  // The publisher ID indicating the venue containing the best bid.
  uint32 bid_pb = 5;
  // The publisher ID indicating the venue containing the best ask.
  uint32 ask_pb = 6;
}

// Market-by-order (MBO) tick message.
message MboMsg {
  RecordHeader hd = 1;
  // The order ID assigned at the venue.
  uint64 order_id = 2;
  // The order price (fixed-point with 1e-9 scale).
  sint64 price = 3;
  // The order quantity.
  uint32 size = 4;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 5; // Corresponds to FlagSet in Rust
  // The channel ID assigned by Databento.
  uint32 channel_id = 6;
  // The event action.
  Action action = 7;
  // The side that initiates the event.
  Side side = 8;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 9;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 10;
  // The message sequence number assigned at the venue.
  uint32 sequence = 11;
}

// Market-by-price depth 0. The record of the Trades schema.
message TradeMsg {
  RecordHeader hd = 1;
  // The trade price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The trade quantity.
  uint32 size = 3;
  // The event action. Always 'T' for trades.
  Action action = 4;
  // The side that initiates the trade.
  Side side = 5;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 6; // Corresponds to FlagSet in Rust
  // The book level where the update event occurred.
  uint32 depth = 7;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 8;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 9;
  // The message sequence number assigned at the venue.
  uint32 sequence = 10;
}

// Market-by-price depth 1. The record of the Mbp1 schema.
message Mbp1Msg {
  RecordHeader hd = 1;
  // The order price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The order quantity.
  uint32 size = 3;
  // The event action.
  Action action = 4;
  // The side that initiates the event.
  Side side = 5;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 6; // Corresponds to FlagSet in Rust
  // The book level where the update event occurred.
  uint32 depth = 7;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 8;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 9;
  // The message sequence number assigned at the venue.
  uint32 sequence = 10;
  // The top of the order book.
  repeated BidAskPair levels = 11; // Array of 1
}

// Market-by-price depth 10. The record of the Mbp10 schema.
message Mbp10Msg {
  RecordHeader hd = 1;
  // The order price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The order quantity.
  uint32 size = 3;
  // The event action.
  Action action = 4;
  // The side that initiates the event.
  Side side = 5;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 6; // Corresponds to FlagSet in Rust
  // The book level where the update event occurred.
  uint32 depth = 7;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 8;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 9;
  // The message sequence number assigned at the venue.
  uint32 sequence = 10;
  // The top 10 levels of the order book.
  repeated BidAskPair levels = 11; // Array of 10
}

// Open, high, low, close, and volume.
message OhlcvMsg {
  RecordHeader hd = 1;
  // The open price for the bar (fixed-point with 1e-9 scale).
  sint64 open = 2;
  // The high price for the bar (fixed-point with 1e-9 scale).
  sint64 high = 3;
  // The low price for the bar (fixed-point with 1e-9 scale).
  sint64 low = 4;
  // The close price for the bar (fixed-point with 1e-9 scale).
  sint64 close = 5;
  // The total volume traded during the aggregation period.
  uint64 volume = 6;
}

// A trading status update message.
message StatusMsg {
  RecordHeader hd = 1;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 2;
  // The type of status change.
  StatusAction action = 3;
  // Additional details about the cause of the status change.
  StatusReason reason = 4;
  // Further information about the status change and its effect on trading.
  TradingEvent trading_event = 5;
  // The best-efforts state of trading in the instrument.
  TriState is_trading = 6;
  // The best-efforts state of quoting in the instrument.
  TriState is_quoting = 7;
  // The best-efforts state of short sell restrictions for the instrument.
  TriState is_short_sell_restricted = 8;
}

// A definition of an instrument.
message InstrumentDefMsg {
  RecordHeader hd = 1;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 2;

  // Price-related fields (all fixed-point with 1e-9 scale)
  sint64 min_price_increment = 3;
  sint64 display_factor = 4;
  sint64 high_limit_price = 5;
  sint64 low_limit_price = 6;
  sint64 max_price_variation = 7;
  sint64 unit_of_measure_qty = 8;
  sint64 min_price_increment_amount = 9;
  sint64 price_ratio = 10;
  sint64 strike_price = 11;
  sint64 leg_price = 12;
  sint64 leg_delta = 13;

  // Timestamp fields (UNIX nanoseconds)
  uint64 expiration = 14;
  uint64 activation = 15;

  // Integer fields
  uint64 raw_instrument_id = 16;
  sint32 inst_attrib_value = 17; // Corresponds to FlagSet in Rust
  uint32 underlying_id = 18;
  sint32 market_depth_implied = 19;
  sint32 market_depth = 20;
  uint32 market_segment_id = 21;
  uint32 max_trade_vol = 22;
  sint32 min_lot_size = 23;
  sint32 min_lot_size_block = 24;
  sint32 min_lot_size_round_lot = 25;
  uint32 min_trade_vol = 26;
  sint32 contract_multiplier = 27;
  sint32 decay_quantity = 28;
  sint32 original_contract_size = 29;

  // Leg fields (for multi-leg strategies)
  uint32 leg_instrument_id = 30;
  sint32 leg_ratio_price_numerator = 31;
  sint32 leg_ratio_price_denominator = 32;
  sint32 leg_ratio_qty_numerator = 33;
  sint32 leg_ratio_qty_denominator = 34;
  uint32 leg_underlying_id = 35;

  // Small integer fields
  sint32 appl_id = 36; // Rust i16
  uint32 maturity_year = 37; // Rust u16
  uint32 decay_start_date = 38; // Rust u16
  uint32 channel_id = 39; // Rust u16
  uint32 leg_count = 40; // Rust u16
  uint32 leg_index = 41; // Rust u16

  // Fixed-length string fields (up to NUL terminator)
  string currency = 42; // [c_char; 4]
  string settl_currency = 43; // [c_char; 4]
  string secsubtype = 44; // [c_char; 6]
  string raw_symbol = 45; // [c_char; 71]
  string group = 46; // [c_char; 21]
  string exchange = 47; // [c_char; 5]
  string asset = 48; // [c_char; 11]
  string cfi = 49; // [c_char; 7]
  string security_type = 50; // [c_char; 7]
  string unit_of_measure = 51; // [c_char; 31]
  string underlying = 52; // [c_char; 21]
  string strike_price_currency = 53; // [c_char; 4]
  string leg_raw_symbol = 54; // [c_char; 71]

  // Character flags
  InstrumentClass instrument_class = 55;
  MatchAlgorithm match_algorithm = 56;
  SecurityUpdateAction security_update_action = 57;
  UserDefinedInstrument user_defined_instrument = 58;
  InstrumentClass leg_instrument_class = 59; // Using InstrumentClass for leg
  Side leg_side = 60; // Using Side for leg

  // Byte fields
  uint32 main_fraction = 61; // Rust u8
  uint32 price_display_format = 62; // Rust u8
  uint32 sub_fraction = 63; // Rust u8
  uint32 underlying_product = 64; // Rust u8
  uint32 maturity_month = 65; // Rust u8
  uint32 maturity_day = 66; // Rust u8
  uint32 maturity_week = 67; // Rust u8
  sint32 contract_multiplier_unit = 68; // Rust i8
  sint32 flow_schedule_type = 69; // Rust i8
  uint32 tick_rule = 70; // Rust u8
}

// An auction imbalance message.
message ImbalanceMsg {
  RecordHeader hd = 1;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 2;

  // Price fields (all fixed-point with 1e-9 scale)
  sint64 ref_price = 3;
  uint64 auction_time = 4; // UNIX nanoseconds
  sint64 cont_book_clr_price = 5;
  sint64 auct_interest_clr_price = 6;
  sint64 ssr_filling_price = 7;
  sint64 ind_match_price = 8;
  sint64 upper_collar = 9;
  sint64 lower_collar = 10;

  // Quantity fields
  uint32 paired_qty = 11;
  uint32 total_imbalance_qty = 12;
  uint32 market_imbalance_qty = 13;
  uint32 unpaired_qty = 14;

  // Character fields
  string auction_type = 15; // c_char
  Side side = 16;
  string unpaired_side = 17; // c_char
  string significant_imbalance = 18; // c_char

  // Status fields
  uint32 auction_status = 19; // u8
  uint32 freeze_status = 20; // u8
  uint32 num_extensions = 21; // u8
}

// A statistics message.
message StatMsg {
  RecordHeader hd = 1;
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 2;
  // The reference timestamp of the statistic value (UNIX nanoseconds).
  uint64 ts_ref = 3;
  // The value for price statistics (fixed-point with 1e-9 scale).
  sint64 price = 4;
  // The value for non-price statistics.
  sint64 quantity = 5;
  // The message sequence number assigned at the venue.
  uint32 sequence = 6;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 7;
  // The type of statistic value.
  StatType stat_type = 8;
  // The channel ID assigned by Databento.
  uint32 channel_id = 9; // Rust u16
  // Indicates if the statistic is newly added or deleted.
  StatUpdateAction update_action = 10;
  // Additional flags associate with certain stat types.
  uint32 stat_flags = 11; // Rust u8
}

// An error message from the Databento Live Subscription Gateway.
message ErrorMsg {
  RecordHeader hd = 1;
  // The error message.
  string err = 2; // [c_char; 302]
  // The error code.
  ErrorCode code = 3;
  // Indicates if this is the last error in a chain.
  uint32 is_last = 4; // Rust u8
}

// A symbol mapping message from the live API.
message SymbolMappingMsg {
  RecordHeader hd = 1;
  // The input symbology type of stype_in_symbol.
  SType stype_in = 2;
  // The input symbol.
  string stype_in_symbol = 3; // [c_char; 71]
  // The output symbology type of stype_out_symbol.
  SType stype_out = 4;
  // The output symbol.
  string stype_out_symbol = 5; // [c_char; 71]
  // The start of the mapping interval (UNIX nanoseconds).
  uint64 start_ts = 6;
  // The end of the mapping interval (UNIX nanoseconds).
  uint64 end_ts = 7;
}

// A non-error message from the Databento Live Subscription Gateway.
message SystemMsg {
  RecordHeader hd = 1;
  // The message from the Databento gateway.
  string msg = 2; // [c_char; 303]
  // Type of system message.
  SystemCode code = 3;
}

// Subsampled market by price with a book depth of 1.
message BboMsg {
  RecordHeader hd = 1;
  // The last trade price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The quantity of the last trade.
  uint32 size = 3;
  // The side that initiated the last trade.
  Side side = 4;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 5; // Corresponds to FlagSet in Rust
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 6;
  // The message sequence number assigned at the venue of the last update.
  uint32 sequence = 7;
  // The top of the order book.
  repeated BidAskPair levels = 8; // Array of 1
}

// Consolidated market-by-price depth 1.
message Cmbp1Msg {
  RecordHeader hd = 1;
  // The order price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The order quantity.
  uint32 size = 3;
  // The event action.
  Action action = 4;
  // The side that initiates the event.
  Side side = 5;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 6; // Corresponds to FlagSet in Rust
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 7;
  // The matching-engine-sending timestamp expressed as nanoseconds before ts_recv.
  sint32 ts_in_delta = 8;
  // The top of the order book.
  repeated ConsolidatedBidAskPair levels = 9; // Array of 1
}

// Subsampled consolidated market by price with a book depth of 1.
message CbboMsg {
  RecordHeader hd = 1;
  // The last trade price (fixed-point with 1e-9 scale).
  sint64 price = 2;
  // The quantity of the last trade.
  uint32 size = 3;
  // The side that initiated the last trade.
  Side side = 4;
  // A bit field indicating event end, message characteristics, and data quality.
  uint32 flags = 5; // Corresponds to FlagSet in Rust
  // The capture-server-received timestamp (UNIX nanoseconds).
  uint64 ts_recv = 6;
  // The top of the order book.
  repeated ConsolidatedBidAskPair levels = 7; // Array of 1
}

// The resolved symbol for a date range.
message MappingInterval {
  // The UTC start date of interval (YYYY-MM-DD).
  string start_date = 1;
  // The UTC end date of interval (YYYY-MM-DD).
  string end_date = 2;
  // The resolved symbol for this interval (in stype_out).
  string symbol = 3;
}

// A raw symbol and its symbol mappings for different time ranges within the query range.
message SymbolMapping {
  // The stype_in symbol.
  string raw_symbol = 1;
  // The mappings of raw_symbol to stype_out for different date ranges.
  repeated MappingInterval intervals = 2;
}

// Information about the data contained in a DBN file or stream.
message Metadata {
  // The DBN schema version number.
  uint32 version = 1; // Rust u8
  // The dataset code.
  string dataset = 2;
  // The data record schema. None indicates the DBN stream may contain more than one record type.
  optional Schema schema = 3;
  // The UNIX nanosecond timestamp of the query start, or the first record if the file was split.
  uint64 start = 4;
  // The UNIX nanosecond timestamp of the query end, or the last record if the file was split.
  optional uint64 end = 5;
  // The optional maximum number of records for the query.
  optional uint64 limit = 6;
  // The input symbology type to map from. None indicates a mix, such as in the case of live data.
  optional SType stype_in = 7;
  // The output symbology type to map to.
  SType stype_out = 8;
  // true if this store contains live data with send timestamps appended to each record.
  bool ts_out = 9;
  // The length in bytes of fixed-length symbol strings, including a null terminator byte.
  uint32 symbol_cstr_len = 10; // Rust usize
  // The original query input symbols from the request.
  repeated string symbols = 11;
  // Symbols that did not resolve for at least one day in the query time range.
  repeated string partial = 12;
  // Symbols that did not resolve for any day in the query time range.
  repeated string not_found = 13;
  // Symbol mappings containing a raw symbol and its mapping intervals.
  repeated SymbolMapping mappings = 14;
}

// Generic DBN record wrapper for when ts_out is enabled.
message DbnRecordWithTsOut {
  // The actual DBN record. Use a oneof to represent different record types.
  oneof record {
    MboMsg mbo_msg = 1;
    TradeMsg trade_msg = 2;
    Mbp1Msg mbp1_msg = 3;
    Mbp10Msg mbp10_msg = 4;
    OhlcvMsg ohlcv_msg = 5;
    StatusMsg status_msg = 6;
    InstrumentDefMsg instrument_def_msg = 7;
    ImbalanceMsg imbalance_msg = 8;
    StatMsg stat_msg = 9;
    ErrorMsg error_msg = 10;
    SymbolMappingMsg symbol_mapping_msg = 11;
    SystemMsg system_msg = 12;
    BboMsg bbo_msg = 13;
    Cmbp1Msg cmbp1_msg = 14;
    CbboMsg cbbo_msg = 15;
  }
  // The live gateway send timestamp (UNIX nanoseconds).
  uint64 ts_out = 16;
}
